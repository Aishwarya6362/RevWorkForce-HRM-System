REVWORKFORCE HRM DATABASE SCHEMA-

1.ROLE (Master Table)
CREATE TABLE ROLE (
    role_id NUMBER PRIMARY KEY,
    role_name VARCHAR2(30) UNIQUE NOT NULL
);

INSERT INTO ROLE VALUES (1, 'EMPLOYEE');
INSERT INTO ROLE VALUES (2, 'MANAGER');
INSERT INTO ROLE VALUES (3, 'ADMIN');
COMMIT;

2. DEPARTMENT (Master Table)
CREATE TABLE DEPARTMENT (
    department_id NUMBER PRIMARY KEY,
    department_name VARCHAR2(50) UNIQUE NOT NULL
);

INSERT INTO DEPARTMENT VALUES (101, 'ENGINEERING');
INSERT INTO DEPARTMENT VALUES (102, 'HUMAN_RESOURCES');
INSERT INTO DEPARTMENT VALUES (103, 'FINANCE');
INSERT INTO DEPARTMENT VALUES (104, 'OPERATIONS');
COMMIT;

3. EMPLOYEE (Core Table)
CREATE TABLE EMPLOYEE (
    emp_id NUMBER PRIMARY KEY,
    name VARCHAR2(100) NOT NULL,
    email VARCHAR2(100) UNIQUE NOT NULL,
    phone VARCHAR2(15),
    emergency_contact VARCHAR2(15),
    address VARCHAR2(200),
    dob DATE,
    designation VARCHAR2(50),
    joining_date DATE,
    department_id NUMBER,
    manager_id NUMBER,
    role_id NUMBER,
    salary NUMBER(10,2),
    password VARCHAR2(100) NOT NULL,
    status VARCHAR2(20) DEFAULT 'ACTIVE',

    CONSTRAINT fk_emp_dept FOREIGN KEY (department_id)
        REFERENCES DEPARTMENT(department_id),

    CONSTRAINT fk_emp_manager FOREIGN KEY (manager_id)
        REFERENCES EMPLOYEE(emp_id),

    CONSTRAINT fk_emp_role FOREIGN KEY (role_id)
        REFERENCES ROLE(role_id)
);

4. LEAVE_TYPE (Master Table)
CREATE TABLE LEAVE_TYPE (
    leave_type_id NUMBER PRIMARY KEY,
    leave_name VARCHAR2(30) UNIQUE NOT NULL,
    max_days_per_year NUMBER NOT NULL
);

INSERT INTO LEAVE_TYPE VALUES (1, 'CASUAL_LEAVE', 12);
INSERT INTO LEAVE_TYPE VALUES (2, 'SICK_LEAVE', 10);
INSERT INTO LEAVE_TYPE VALUES (3, 'PAID_LEAVE', 15);
INSERT INTO LEAVE_TYPE VALUES (4, 'PRIVILEGE_LEAVE', 20);
COMMIT;

5. LEAVE_BALANCE
CREATE TABLE LEAVE_BALANCE (
    emp_id NUMBER,
    leave_type_id NUMBER,
    balance NUMBER NOT NULL,

    CONSTRAINT pk_leave_balance PRIMARY KEY (emp_id, leave_type_id),
    CONSTRAINT fk_lb_emp FOREIGN KEY (emp_id)
        REFERENCES EMPLOYEE(emp_id),
    CONSTRAINT fk_lb_type FOREIGN KEY (leave_type_id)
        REFERENCES LEAVE_TYPE(leave_type_id)
);

6. LEAVE_REQUEST
CREATE TABLE LEAVE_REQUEST (
    leave_request_id NUMBER PRIMARY KEY,
    emp_id NUMBER NOT NULL,
    leave_type_id NUMBER NOT NULL,
    start_date DATE NOT NULL,
    end_date DATE NOT NULL,
    reason VARCHAR2(200),
    status VARCHAR2(20) DEFAULT 'PENDING',
    applied_date DATE DEFAULT SYSDATE,
    manager_comments VARCHAR2(200),

    CONSTRAINT fk_leave_emp FOREIGN KEY (emp_id)
        REFERENCES EMPLOYEE(emp_id),
    CONSTRAINT fk_leave_type FOREIGN KEY (leave_type_id)
        REFERENCES LEAVE_TYPE(leave_type_id)
);

7. NOTIFICATION
CREATE TABLE NOTIFICATION (
    notification_id NUMBER PRIMARY KEY,
    emp_id NUMBER NOT NULL,
    message VARCHAR2(300),
    status VARCHAR2(20) DEFAULT 'UNREAD',
    created_date DATE DEFAULT SYSDATE,

    CONSTRAINT fk_notify_emp FOREIGN KEY (emp_id)
        REFERENCES EMPLOYEE(emp_id)
);

8. PERFORMANCE_REVIEW
CREATE TABLE PERFORMANCE_REVIEW (
    review_id NUMBER PRIMARY KEY,
    emp_id NUMBER NOT NULL,
    review_year NUMBER NOT NULL,
    achievements VARCHAR2(500),
    improvements VARCHAR2(500),
    self_rating NUMBER(2,1),
    manager_feedback VARCHAR2(500),
    manager_rating NUMBER(2,1),
    status VARCHAR2(20) DEFAULT 'SUBMITTED',

    CONSTRAINT fk_review_emp FOREIGN KEY (emp_id)
        REFERENCES EMPLOYEE(emp_id),

    CONSTRAINT uq_emp_year UNIQUE (emp_id, review_year)
);

9. GOALS
CREATE TABLE GOALS (
    goal_id NUMBER PRIMARY KEY,
    emp_id NUMBER NOT NULL,
    goal_description VARCHAR2(300),
    deadline DATE,
    priority VARCHAR2(20),
    success_metric VARCHAR2(200),
    progress_status VARCHAR2(20) DEFAULT 'NOT_STARTED',

    CONSTRAINT fk_goal_emp FOREIGN KEY (emp_id)
        REFERENCES EMPLOYEE(emp_id)
);

10. HOLIDAYS
CREATE TABLE HOLIDAYS (
    holiday_id NUMBER PRIMARY KEY,
    holiday_name VARCHAR2(100),
    holiday_date DATE UNIQUE,
    description VARCHAR2(200)
);

INSERT INTO HOLIDAYS VALUES (1, 'New Year', DATE '2026-01-01', 'New Year Holiday');
INSERT INTO HOLIDAYS VALUES (2, 'Republic Day', DATE '2026-01-26', 'National Holiday');
INSERT INTO HOLIDAYS VALUES (3, 'Independence Day', DATE '2026-08-15', 'National Holiday');
COMMIT;

11. ANNOUNCEMENTS
CREATE TABLE ANNOUNCEMENTS (
    announcement_id NUMBER PRIMARY KEY,
    title VARCHAR2(100),
    message VARCHAR2(500),
    created_by NUMBER,
    created_date DATE DEFAULT SYSDATE,

    CONSTRAINT fk_announce_admin FOREIGN KEY (created_by)
        REFERENCES EMPLOYEE(emp_id)
);

12. AUDIT_LOG
CREATE TABLE AUDIT_LOG (
    log_id NUMBER PRIMARY KEY,
    emp_id NUMBER,
    action VARCHAR2(200),
    action_date DATE DEFAULT SYSDATE,

    CONSTRAINT fk_audit_emp FOREIGN KEY (emp_id)
        REFERENCES EMPLOYEE(emp_id)
);

13. SEQUENCES
CREATE SEQUENCE leave_seq START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE notification_seq START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE perf_seq START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE goal_seq START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE holiday_seq START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE announcement_seq START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;
CREATE SEQUENCE audit_seq START WITH 1 INCREMENT BY 1 NOCACHE NOCYCLE;
COMMIT;